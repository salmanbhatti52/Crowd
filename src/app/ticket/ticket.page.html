<ion-header>
  <ion-toolbar >
    <img class="header_bg" src="../../assets/imgs/icons/new_icons/Background1.png" alt="">
    <ion-row class="header_content">
      <ion-col size="2" class="centerall"
        >
        <img
          (click)="goBack()"
          style="height: 25px;"
          src="../../assets/imgs/icons/new_icons/BackIcon.png"
        />
      </ion-col>
      <ion-col size="8" class="centerall">
        <ion-label class="titlefont roboto">Ticket</ion-label>
      </ion-col>
      <ion-col class="centerall" size="2"> </ion-col>
    </ion-row>
  </ion-toolbar>
</ion-header>

<ion-content style="--background: #262626">
<div class="container"  style="position: relative;" >
  
  <swiper-container  [slidesPerView]="1.2" [spaceBetween]="13" [centeredSlides]="true" (slidechange)="onSlideChange($event)" >
    <swiper-slide *ngFor="let ticket of tickets;let i=index" style="width: 335px;">
      <div class="ticket">
        <!-- <div id="ticket-p-a" style="position: relative;z-index: 2;text-align: center;"> -->
          <!-- <img  class="ticket_tick" src="../../assets/imgs/ticket_tick.svg" alt=""> -->
          <!-- <img src="{{rest.baseURLimg}}{{detailObj.events_images[0].name}}" style="height: 220px;
          width: 95%;
          clip-path: polygon(50% 0%, 100% 0%, 100% 93%, 50% 100%, 0% 93%, 0% 0%);
          border-radius: 25px 25px 0px 0px;" alt=""> -->
          <!-- <div style="background-color: #262626;
          height: 120px;
          clip-path: polygon(50% 0%, 100% 0%, 100% 93%, 50% 100%, 0% 93%, 0% 0%);"></div>
          <div class="content_position">
            <div class="roboto heading_text">{{detailObj.events.venue_name}}</div>
            <div class="roboto event_name">{{detailObj.events.name}}</div>
            
            <div class="flex_center info_text1" style="margin: 0px auto 0px 0px;">
              <img class="small_icon_style" src="../../assets/imgs/icons/new_icons/CalanderIcon.png" alt="">
              <div class="roboto" style="line-height: normal;">{{getDate(detailObj.events.event_date)}}</div>
            </div>
            <div class="flex_center info_text2" style="margin: 0px 0px auto auto;">
              <img class="small_icon_style" src="../../assets/imgs/icons/new_icons/ClockIcon.png" alt="">
              <div class="roboto" style="line-height: normal;">{{getTime(detailObj.events.event_start_time)}} - {{getTime(detailObj.events.event_end_time)}}</div>
            </div>
          </div>
          
          <div style="margin: 7px 5px 5px; position: relative;">
          </div> -->

        <!-- </div> -->
        
       

        <div class="ticket-p-b" style="position: relative;z-index: 1;">
          <!-- <hr > -->
          <img style="position: absolute;
          top: 0px;
          z-index: 0;
          width: 100%;
          height: 500px;"  src="../../assets/imgs/icons/new_icons/TicketBackground2.png" alt="">

          <div style="background-color: #262626;
          height: 120px;
          position: relative;
          border-radius: 10px 10px 0px 0px;
          /* z-index: 1; */
          width: 95%;
          /* clip-path: polygon(50% 0%, 100% 0%, 100% 93%, 50% 100%, 0% 93%, 0% 0%); */
          margin: 0px auto;"></div>
          <div class="content_position">
            <div class="roboto heading_text">{{eventObj.venueName}}</div>
            <div class="roboto event_name">{{eventObj.name}}</div>
            
            <div class="flex_center info_text1" style="margin: 0px auto 0px 0px;">
              <img class="small_icon_style" src="../../assets/imgs/icons/new_icons/CalanderIcon.png" alt="">
              <div class="roboto" style="line-height: normal;">{{getDate(eventObj.date)}}</div>
            </div>
            <div class="flex_center info_text2" style="margin: 0px 0px auto auto;">
              <img class="small_icon_style" src="../../assets/imgs/icons/new_icons/ClockIcon.png" alt="">
              <div class="roboto" style="line-height: normal;">{{getTime(eventObj.startTime)}} - {{getTime(eventObj.endTime)}}</div>
            </div>
          </div>

          <!-- <div style="margin: 7px 5px 5px; position: relative;">
          </div> -->
          <div class="center" style="margin-top: 10px;position: relative;">
    
            <qrcode 
              [qrdata]="ticket.my_qr_code" 
              [allowEmptyString]="true" 
              [width]="200" 
              [errorCorrectionLevel]="'M'">
            </qrcode>

          </div>
          <div class="center font roboto" style="position: relative;">{{userName}}</div>
          <div class="center font roboto" style="margin-top: 5px;position: relative;">{{ticket.random_string}}</div>
          <div style="position: relative;">
            <div class="center roboto loc_label" >Location</div>
            <div class="center roboto location">{{rest.billDetails.location}}</div>
            <!-- <img class="center" style="margin-top: 5px; height: 95px;" src="../../assets/imgs/map_bg.jpg" alt=""> -->
          </div>
          <div class="ticket-buttons">
            <img (click)="setOpen(true)" style="width: 18px;" src="../../assets/imgs/icons/new_icons/RefundIcon.png" alt="">
            <img style="width: 18px;" src="../../assets/imgs/icons/icon_nav.svg" alt="">
            <img (click)="generatePDF()" style="width: 18px;" src="../../assets/imgs/icons/new_icons/DownloadIcon.png" alt="">
          </div>
        </div>
      </div>
    </swiper-slide>
  </swiper-container>
  
    <!-- <div class="flex_center" [class.align_center]="this.rest.comfrom == 'event-detail'" style="margin: 2px 20px;">
      <div  style="width: 100%;">
        <ion-button (click)="setOpen(true)"
            style="margin-top: 10px; opacity: 1;"
            class="btnbgred roboto"
            >Request Refund</ion-button
          >
      </div>
      <img *ngIf="this.rest.comfrom != 'event-detail'" style="margin-left: 11px;" (click)="generatePDF()" src="../../assets/imgs/download_btn.svg" alt="">

      
    </div> -->
    <ion-modal class="refund_popup" style="--background: #262626;" #modal [isOpen]="isModalOpen">
      <ng-template>
        <ion-content >
          <div class="modal_popup">
            <div class="center">
              <img style="width: 30px;" src="../../assets/imgs/icons/new_icons/RefundIcon.png" alt="">
            </div>
            <div class="msg_btn_sec">
              <div class="roboto modal_title">Confirm Refund Request</div>
              <!-- <div class="roboto modal_desc">Are you sure you want to refund the ticket?</div> -->
                <div
                  (click)="hideShowRefundReasons()"
                  class="dropdown-transparent"
                  style="
                    height: 38px;
                    display: flex;
                    justify-content: end;
                    align-items: center;
                    width: 215px;
                    margin: 20px auto 0px;
                  "
                >
                  <p class="people">{{selectedRefundReason}}</p>
            
                  <img class="dd_icon" [class.dd_icon_active]="showRefundReasons"
                    src="/assets/imgs/downw.svg"
                  />
                </div>
          
                <div
                  style="
                    position: absolute;
                    width: 200px;
                    right: 19%;
                    background: linear-gradient(180deg, #262626, #302f2f);
                    z-index: 999;
                    border-radius: 0px 0px 20px 20px;
                  "
                  *ngIf="showRefundReasons"
                >
                  <p class="roboto pp" (click)="selectRefundReason(reason)" *ngFor="let reason of refundReasons">
                    {{reason}}
                  </p>
                </div>
            </div>
            <ion-button (click)="requestRefund()" style="display: flex;
            width: 80%;margin: 28px auto 0px;" class="roboto btnbg">Confirm</ion-button>
          
            <div class="footer_text">Terms and Conditions Apply.</div>
            
          </div>
          
        </ion-content>
      </ng-template>
    </ion-modal>

    <ion-modal class="refund_popup" style="--background: #262626;" #modal [isOpen]="isConfirmRefund">
      <ng-template>
        <ion-content >
          <div class="modal_popup">
            <div class="center">
              <img style="width: 52px;"   src="../../assets/imgs/icons/new_icons/ConfirmedIcon.png" alt="">
            </div>
            <div class="msg_btn_sec">
              <div class="roboto modal_title">Refund Request Pending</div>
              <div class="roboto modal_desc">Thank you, the Event has been informed.</div>
                
            </div>
            <ion-button (click)="dismissConfirmRefundModal()" style="display: flex;
            width: 80%;margin: 28px auto 0px;" class="roboto btnbg">Close</ion-button>
          
            <div class="footer_text">Terms and Conditions Apply.</div>
            
          </div>
          
        </ion-content>
      </ng-template>
    </ion-modal>
  </div>
</ion-content>
